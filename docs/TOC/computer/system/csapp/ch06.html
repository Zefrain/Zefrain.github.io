<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-TOC/computer/system/csapp/ch06" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">ch06 | Zefrain&#x27;s Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/docs/TOC/computer/system/csapp/ch06"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ch06 | Zefrain&#x27;s Blog"><meta data-rh="true" name="description" content="- Chapter 6. The Memory Hierarchy"><meta data-rh="true" property="og:description" content="- Chapter 6. The Memory Hierarchy"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://github.com/docs/TOC/computer/system/csapp/ch06"><link data-rh="true" rel="alternate" href="https://github.com/docs/TOC/computer/system/csapp/ch06" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/docs/TOC/computer/system/csapp/ch06" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Zefrain&#39;s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Zefrain&#39;s Blog Atom Feed">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.cd824bbd.css">
<script src="/assets/js/runtime~main.7cf01130.js" defer="defer"></script>
<script src="/assets/js/main.7cc9d956.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Homepage</b></a><a class="navbar__item navbar__link" href="/docs/category/TOC">NOTEs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Zefrain" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/toc">TOC</a><button aria-label="Collapse sidebar category &#x27;TOC&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/computer-science">Computer Science</a><button aria-label="Collapse sidebar category &#x27;Computer Science&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/computer-architecture--quantitative-approach">Computer Architecture &amp; Quantitative Approach</a><button aria-label="Expand sidebar category &#x27;Computer Architecture &amp; Quantitative Approach&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/distributed-system">Distributed System</a><button aria-label="Expand sidebar category &#x27;Distributed System&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/linux-kernel">Linux Kernel</a><button aria-label="Expand sidebar category &#x27;Linux Kernel&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/system">System</a><button aria-label="Collapse sidebar category &#x27;System&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/computer-systems-a-programmers-perspective">Computer Systems: A Programmer&#x27;s Perspective</a><button aria-label="Collapse sidebar category &#x27;Computer Systems: A Programmer&#x27;s Perspective&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TOC/computer/system/csapp/ch03">Chapter 3 Machine-Level Representation of Programs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/TOC/computer/system/csapp/ch06">ch06</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TOC/computer/system/csapp/ch07">Chapter 7 Linking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TOC/computer/system/csapp/ch08">Chapter 8 Exceptional Control Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TOC/computer/system/csapp/ch09">Chapter 9. Virtual Memory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TOC/computer/system/csapp/ch10">Chapter 10. System-Level I/O</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TOC/computer/system/csapp/ch11">Chapter 11 Network Programming</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/operating-systems-three-easy-pieces">Operating Systems Three Easy Pieces</a><button aria-label="Expand sidebar category &#x27;Operating Systems Three Easy Pieces&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/advanced-programming-in-the-unix-environment">Advanced Programming in the Unix Environment</a><button aria-label="Expand sidebar category &#x27;Advanced Programming in the Unix Environment&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/the-linux-programming-interface">The Linux Programming Interface</a><button aria-label="Expand sidebar category &#x27;The Linux Programming Interface&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/networking">Networking</a><button aria-label="Expand sidebar category &#x27;Networking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/category/算法-第-4-版">Algorithms</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/TOC/computer/Code Pieces/Data Structure/circular queue">Code Pieces</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/programming-language">Programming Language</a><button aria-label="Collapse sidebar category &#x27;Programming Language&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/TOC/language/C++/C++_Primer/ch02">C++</a></div></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/toc"><span itemprop="name">TOC</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/computer-science"><span itemprop="name">Computer Science</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/system"><span itemprop="name">System</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/computer-systems-a-programmers-perspective"><span itemprop="name">Computer Systems: A Programmer&#x27;s Perspective</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ch06</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><ul>
<li><a href="#chapter-6-the-memory-hierarchy">Chapter 6. The Memory Hierarchy</a>
<ul>
<li><a href="#61-storage-technologies">6.1 Storage Technologies</a>
<ul>
<li><a href="#611-random-access-memory">6.1.1 Random Access Memory</a>
<ul>
<li><a href="#static-ram">Static RAM</a></li>
<li><a href="#dynamic-ram">Dynamic RAM</a></li>
<li><a href="#conventional-drams">Conventional DRAMs</a></li>
<li><a href="#memory-modules">Memory Modules</a></li>
<li><a href="#nonvolatile-memory">Nonvolatile Memory</a></li>
<li><a href="#accessing-main-memory">Accessing Main Memory</a></li>
</ul>
</li>
<li><a href="#612-disk-storage">6.1.2 Disk Storage</a>
<ul>
<li><a href="#disk-operation">Disk Operation</a>
<ul>
<li><a href="#practice-problem-63">Practice Problem 6.3</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#62-locality">6.2 Locality</a></li>
<li><a href="#63-the-memory-hierarchy">6.3 The Memory Hierarchy</a>
<ul>
<li><a href="#cache-hits">Cache Hits</a></li>
<li><a href="#cache-misses">Cache Misses</a></li>
<li><a href="#kinds-of-cache-misses">Kinds of Cache Misses</a></li>
<li><a href="#cache-management">Cache Management</a></li>
</ul>
</li>
<li><a href="#64-cache-memories">6.4 Cache Memories</a>
<ul>
<li><a href="#641-generic-cache-memory-organization">6.4.1 Generic Cache Memory Organization</a></li>
<li><a href="#642-direct-mapped-caches">6.4.2 Direct-Mapped Caches</a>
<ul>
<li><a href="#set-selection-in-direct-mapped-caches">Set Selection in Direct-Mapped Caches</a></li>
<li><a href="#line-matching-in-direct-mapped-caches">Line Matching in Direct-Mapped Caches</a></li>
<li><a href="#word-selection-in-direct-mapped-caches">Word Selection in Direct-Mapped Caches</a></li>
<li><a href="#line-replacement-on-missess-in-direct-mapped-caches">Line Replacement on Missess in Direct-Mapped Caches</a></li>
<li><a href="#putting-it-together-a-direct-mapped-cache-in-action">Putting It Together: A Direct-Mapped Cache in Action</a></li>
<li><a href="#conflict-misses-in-direct-mapped-caches">Conflict Misses in Direct-Mapped Caches</a></li>
</ul>
</li>
<li><a href="#643-set-associative-caches">6.4.3 Set Associative Caches</a>
<ul>
<li><a href="#set-selection-in-set-associative-caches">Set Selection in Set Associative Caches</a></li>
<li><a href="#line-matching-and-word-selection-in-set-associative-caches">Line Matching and Word Selection in Set Associative Caches</a></li>
<li><a href="#line-replacement-on-misses-in-set-associative-caches">Line Replacement on Misses in Set Associative Caches</a></li>
</ul>
</li>
<li><a href="#644-fully-associative-caches">6.4.4 Fully Associative Caches</a>
<ul>
<li><a href="#set-selection-in-fully-associative-caches">Set Selection in Fully Associative Caches</a></li>
<li><a href="#line-matching-and-word-selection-in-fully-associative-caches">Line Matching and Word Selection in Fully Associative Caches</a></li>
</ul>
</li>
<li><a href="#645-issues-with-writes">6.4.5 Issues with Writes</a></li>
<li><a href="#646-anatomy-of-a-real-cache-hierarchy">6.4.6 Anatomy of a Real Cache Hierarchy</a></li>
<li><a href="#647-performance-impact-of-cache-parameters">6.4.7 Performance Impact of Cache Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#misses-references">misses / # references</a>
<ul>
<li><a href="#impact-of-cache-size">Impact of Cache Size</a></li>
<li><a href="#impact-of-block-size">Impact of Block Size</a></li>
<li><a href="#impact-of-associativity">Impact of Associativity</a></li>
<li><a href="#impact-of-write-strategy">Impact of Write Strategy</a></li>
<li><a href="#65-writing-cache-friendly-code">6.5 Writing Cache-Friendly Code</a></li>
<li><a href="#66-putting-it-together-the-impact-of-caches-on-program-performance">6.6 Putting It Together: The Impact of Caches on Program Performance</a></li>
<li><a href="#67-summary">6.7 Summary</a></li>
</ul>
</li>
</ul>
<header><h1>Chapter 6. The Memory Hierarchy</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="61-storage-technologies">6.1 Storage Technologies<a href="#61-storage-technologies" class="hash-link" aria-label="Direct link to 6.1 Storage Technologies" title="Direct link to 6.1 Storage Technologies">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="611-random-access-memory">6.1.1 Random Access Memory<a href="#611-random-access-memory" class="hash-link" aria-label="Direct link to 6.1.1 Random Access Memory" title="Direct link to 6.1.1 Random Access Memory">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="static-ram">Static RAM<a href="#static-ram" class="hash-link" aria-label="Direct link to Static RAM" title="Direct link to Static RAM">​</a></h4>
<p><strong>SRAM</strong> stores each bit in a <em>bistable</em> memory cell. Each cell is implemented with a <strong>six-transistor</strong> circuit.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-ram">Dynamic RAM<a href="#dynamic-ram" class="hash-link" aria-label="Direct link to Dynamic RAM" title="Direct link to Dynamic RAM">​</a></h4>
<p><strong>DRAM</strong> stores each bit as charge on a capacitor.</p>
<p>A DRAM memory cell is very sensitive to any disturbance. When the capacitor voltage is disturbed, it will never recover.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="conventional-drams">Conventional DRAMs<a href="#conventional-drams" class="hash-link" aria-label="Direct link to Conventional DRAMs" title="Direct link to Conventional DRAMs">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="memory-modules">Memory Modules<a href="#memory-modules" class="hash-link" aria-label="Direct link to Memory Modules" title="Direct link to Memory Modules">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nonvolatile-memory">Nonvolatile Memory<a href="#nonvolatile-memory" class="hash-link" aria-label="Direct link to Nonvolatile Memory" title="Direct link to Nonvolatile Memory">​</a></h4>
<p>DRAMs and SRAMs are <em>volatile</em> in the sense they lose their information if the supply voltage is turned off.
<em>Nonvolatile Memories</em> retain their information even when they are powed off. which refered to <strong>ROMs</strong> (read-only memories, for historical reasons), some types of ROMs can be written as well as read.</p>
<p><em>programmable ROM (PROM)</em> can be programmed exactly once.</p>
<p><em>erasable programming ROM</em> (EPROM) has a transparent quartz window that permits light to reach the storage cells. cleared to zeros by ultraviolet light through the window</p>
<p><em>electrically EPROM (EEPROM)</em> is akin to an EPROM without physically programming device required.</p>
<p><em>Flash memory</em>, based on EEPROMs. <em>solid state disk (SSD)</em></p>
<p>Programs stored in ROM devices are often referred to as <em>firmware</em> .</p>
<p>Complicated devices such as graphics cards and disk drive controllers also rely on firmware to translate I/O (input/output) requests from the CPU.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-main-memory">Accessing Main Memory<a href="#accessing-main-memory" class="hash-link" aria-label="Direct link to Accessing Main Memory" title="Direct link to Accessing Main Memory">​</a></h4>
<p>A <em>read transaction</em> transfers data from the main memory to the CPU. A <em>write transaction</em> transfers data from the CPU to the main memory.</p>
<p>The main components are the CPU chip, a chipset we will call an <em>I/O bridge</em> (which includes the memory controller), and the DRAM memory modules that make up main memory.</p>
<p>CPU performs a load operation:</p>
<div class="language-asm codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-asm codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">movq A, %rax</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>CPU performs a store operation:</p>
<div class="language-asm codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-asm codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">movq %rax, A</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="612-disk-storage">6.1.2 Disk Storage<a href="#612-disk-storage" class="hash-link" aria-label="Direct link to 6.1.2 Disk Storage" title="Direct link to 6.1.2 Disk Storage">​</a></h3>
<ul>
<li>
<p><em>Seek time</em>. To read the contents of some target sector, the arm first positions the head over the track that contains the target sector.</p>
</li>
<li>
<p><em>Rotational latency</em>. Once the head is in position over the track, the drive waits for the first bit of the target sector to pass under the head.</p>
</li>
</ul>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi>T</mi><mtext>max rotation</mtext></msub><mo>=</mo><mfrac><mn>1</mn><mtext>RPM</mtext></mfrac><mo>×</mo><mfrac><mrow><mn>60</mn><mtext>  </mtext><mtext>secs</mtext></mrow><mrow><mn>1</mn><mtext>  </mtext><mtext>min</mtext></mrow></mfrac></mrow></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi>T</mi><mtext>avg rotation </mtext></msub><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>×</mo><msub><mi>T</mi><mtext>max rotation</mtext></msub></mrow></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align}
&amp;T_{\text{max rotation}} = \frac{1}{\text{RPM}} \times \frac{60 \; \text{secs}}{1 \; \text{min}} \\
&amp;T_{\text{avg rotation }} = \frac{1}{2} \times T_{\text{max rotation}}
\end{align}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.6149em;vertical-align:-2.0574em"></span><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5574em"><span style="top:-4.5574em"><span class="pstrut" style="height:3.3214em"></span><span class="mord"></span></span><span style="top:-2.25em"><span class="pstrut" style="height:3.3214em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.0574em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5574em"><span style="top:-4.5574em"><span class="pstrut" style="height:3.3214em"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">max rotation</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">RPM</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord text"><span class="mord">min</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">60</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord text"><span class="mord">secs</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.25em"><span class="pstrut" style="height:3.3214em"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg rotation </span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">max rotation</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.0574em"><span></span></span></span></span></span></span></span><span class="tag"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5574em"><span style="top:-4.5574em"><span class="pstrut" style="height:3.3214em"></span><span class="eqn-num"></span></span><span style="top:-2.25em"><span class="pstrut" style="height:3.3214em"></span><span class="eqn-num"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.0574em"><span></span></span></span></span></span></span></span></span>
<ul>
<li><em>Transfer time</em>. When the first bit of the target sector is under the head, the drive can begin to read or write the contents of the sector.</li>
</ul>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>T</mi><mtext>avg transfer</mtext></msub><mo>=</mo><mfrac><mn>1</mn><mtext>RPM</mtext></mfrac><mo>×</mo><mfrac><mn>1</mn><mtext>average number of sectors/track</mtext></mfrac><mo>×</mo><mfrac><mrow><mn>60</mn><mtext>  </mtext><mtext>secs</mtext></mrow><mrow><mn>1</mn><mtext>  </mtext><mtext>min</mtext></mrow></mfrac></mrow><annotation encoding="application/x-tex">T_{\text{avg transfer}} = \frac{1}{\text{RPM}} \times \frac{1}{\text{average number of sectors/track}} \times \frac{60 \; \text{secs}}{1 \; \text{min}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg transfer</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">RPM</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.2574em;vertical-align:-0.936em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">average number of sectors/track</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord text"><span class="mord">min</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">60</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord text"><span class="mord">secs</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="disk-operation">Disk Operation<a href="#disk-operation" class="hash-link" aria-label="Direct link to Disk Operation" title="Direct link to Disk Operation">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="practice-problem-63">Practice Problem 6.3<a href="#practice-problem-63" class="hash-link" aria-label="Direct link to Practice Problem 6.3" title="Direct link to Practice Problem 6.3">​</a></h5>
<p>Estimate the average time (in ms) to access a sector on the following disk</p>
<table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Rotational rate</td><td>15000 RPM</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mtext>avg seek</mtext></msub></mrow><annotation encoding="application/x-tex">T_\text{avg seek}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">avg seek</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></td><td>8 ms</td></tr><tr><td>Average number of sectors/track</td><td>500</td></tr></tbody></table>
<ul>
<li>Solution:<!-- -->
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>T</mi><mtext>access</mtext></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>T</mi><mtext>avg seek</mtext></msub><mo>+</mo><msub><mi>T</mi><mtext>avg rotation</mtext></msub><mo>+</mo><msub><mi>T</mi><mtext>avg transfer</mtext></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>8</mn><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>×</mo><mfrac><mn>60</mn><mn>15000</mn></mfrac><mo>×</mo><mn>1000</mn><mtext>ms</mtext><mi mathvariant="normal">/</mi><mi>sec</mi><mo>⁡</mo><mo>+</mo><mfrac><mn>60</mn><mn>15000</mn></mfrac><mo>×</mo><mfrac><mn>1</mn><mn>500</mn></mfrac><mo>×</mo><mn>1000</mn><mtext>ms</mtext><mi mathvariant="normal">/</mi><mi>sec</mi><mo>⁡</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>8</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>0.008</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>10.008</mn><mtext>  </mtext><mtext>ms</mtext></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
T_\text{access} &amp;= T_\text{avg seek} + T_\text{avg rotation} + T_\text{avg transfer} \\
                &amp;= 8 + \frac{1}{2} \times \frac{60}{15000} \times 1000 \text{ms} /\sec + \frac{60}{15000} \times \frac{1}{500} \times 1000 \text{ms} / \sec \\
                &amp;= 8 + 2 + 0.008 \\
                &amp;= 10.008 \; \text{ms}
\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6.8074em;vertical-align:-3.1537em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.6537em"><span style="top:-6.1352em"><span class="pstrut" style="height:3.3214em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">access</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-4.1537em"><span class="pstrut" style="height:3.3214em"></span><span class="mord"></span></span><span style="top:-2.3277em"><span class="pstrut" style="height:3.3214em"></span><span class="mord"></span></span><span style="top:-0.8277em"><span class="pstrut" style="height:3.3214em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.1537em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.6537em"><span style="top:-6.1352em"><span class="pstrut" style="height:3.3214em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">avg seek</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">avg rotation</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">avg transfer</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span><span style="top:-4.1537em"><span class="pstrut" style="height:3.3214em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">15000</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">60</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1000</span><span class="mord text"><span class="mord">ms</span></span><span class="mord">/</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">sec</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">+</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">15000</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">60</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">500</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1000</span><span class="mord text"><span class="mord">ms</span></span><span class="mord">/</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">sec</span></span></span><span style="top:-2.3277em"><span class="pstrut" style="height:3.3214em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">0.008</span></span></span><span style="top:-0.8277em"><span class="pstrut" style="height:3.3214em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">10.008</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord text"><span class="mord">ms</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.1537em"><span></span></span></span></span></span></span></span></span></span></span></span>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="62-locality">6.2 Locality<a href="#62-locality" class="hash-link" aria-label="Direct link to 6.2 Locality" title="Direct link to 6.2 Locality">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="63-the-memory-hierarchy">6.3 The Memory Hierarchy<a href="#63-the-memory-hierarchy" class="hash-link" aria-label="Direct link to 6.3 The Memory Hierarchy" title="Direct link to 6.3 The Memory Hierarchy">​</a></h2>
<div style="text-align:center"><p><img decoding="async" loading="lazy" src="/assets/images/fig6.21-8c1163bc4f526afa400bccd4f9c799ae.svg" width="957" height="495" class="img_ev3q"></p><p><em>Figure 6.21 The memory hierarchy</em></p></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cache-hits">Cache Hits<a href="#cache-hits" class="hash-link" aria-label="Direct link to Cache Hits" title="Direct link to Cache Hits">​</a></h3>
<p>the data object cached at level <em>k</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cache-misses">Cache Misses<a href="#cache-misses" class="hash-link" aria-label="Direct link to Cache Misses" title="Direct link to Cache Misses">​</a></h3>
<p>the data object is not cached at level <em>k</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kinds-of-cache-misses">Kinds of Cache Misses<a href="#kinds-of-cache-misses" class="hash-link" aria-label="Direct link to Kinds of Cache Misses" title="Direct link to Kinds of Cache Misses">​</a></h3>
<ul>
<li><em>compulsory misses</em></li>
<li><em>cold misses</em>: are important because they are often transient events that might not occur in steady state, after the cache has been warmed up by repeated memory</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cache-management">Cache Management<a href="#cache-management" class="hash-link" aria-label="Direct link to Cache Management" title="Direct link to Cache Management">​</a></h3>
<p>the essence of the memory hierarchy is that the storage device at each level is a cache for the next lower level. At each level, some form of logic must <em>manage</em> the cache.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="64-cache-memories">6.4 Cache Memories<a href="#64-cache-memories" class="hash-link" aria-label="Direct link to 6.4 Cache Memories" title="Direct link to 6.4 Cache Memories">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="641-generic-cache-memory-organization">6.4.1 Generic Cache Memory Organization<a href="#641-generic-cache-memory-organization" class="hash-link" aria-label="Direct link to 6.4.1 Generic Cache Memory Organization" title="Direct link to 6.4.1 Generic Cache Memory Organization">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="642-direct-mapped-caches">6.4.2 Direct-Mapped Caches<a href="#642-direct-mapped-caches" class="hash-link" aria-label="Direct link to 6.4.2 Direct-Mapped Caches" title="Direct link to 6.4.2 Direct-Mapped Caches">​</a></h3>
<div style="text-align:center"><p><img decoding="async" loading="lazy" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM6eGw9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjMwOSA1MTEgMzgxIDIzNSIgd2lkdGg9IjM4MSIgaGVpZ2h0PSIyMzUiPgogIDxkZWZzLz4KICA8ZyBpZD0iZmlnNl8yNyIgZmlsbD0ibm9uZSIgZmlsbC1vcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiIHN0cm9rZS1vcGFjaXR5PSIxIiBzdHJva2UtZGFzaGFycmF5PSJub25lIj4KICAgIDx0aXRsZT5maWc2LjI3PC90aXRsZT4KICAgIDxyZWN0IGZpbGw9IndoaXRlIiB4PSIzMDkiIHk9IjUxMSIgd2lkdGg9IjM4MSIgaGVpZ2h0PSIyMzUiLz4KICAgIDxnIGlkPSJmaWc2XzI3X0xheWVyXzEiPgogICAgICA8dGl0bGU+TGF5ZXIgMTwvdGl0bGU+CiAgICAgIDxnIGlkPSJHcm91cF8xMCI+CiAgICAgICAgPGcgaWQ9IkdyYXBoaWNfNiI+CiAgICAgICAgICA8cmVjdCB4PSIzODkiIHk9IjUxMS41IiB3aWR0aD0iMzAwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjYzBmZmZmIi8+CiAgICAgICAgICA8cmVjdCB4PSIzODkiIHk9IjUxMS41IiB3aWR0aD0iMzAwIiBoZWlnaHQ9IjUwIiBzdHJva2U9ImdyYXkiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgICAgPC9nPgogICAgICAgIDxnIGlkPSJHcmFwaGljXzMiPgogICAgICAgICAgPHJlY3QgeD0iMzk2LjUiIHk9IjUyNCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjI1IiBmaWxsPSJ3aGl0ZSIvPgogICAgICAgICAgPHJlY3QgeD0iMzk2LjUiIHk9IjUyNCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjI1IiBzdHJva2U9ImdyYXkiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgICAgICA8dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MDEuNSA1MjcuMjc2KSIgZmlsbD0iYmxhY2siPgogICAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmaWxsPSJibGFjayIgeD0iMi45NiIgeT0iMTUiPlZhbGlkPC90c3Bhbj4KICAgICAgICAgIDwvdGV4dD4KICAgICAgICA8L2c+CiAgICAgICAgPGcgaWQ9IkdyYXBoaWNfNCI+CiAgICAgICAgICA8cmVjdCB4PSI0NzkuNSIgeT0iNTI0Ljc1IiB3aWR0aD0iNTAiIGhlaWdodD0iMjUiIGZpbGw9IndoaXRlIi8+CiAgICAgICAgICA8cmVjdCB4PSI0NzkuNSIgeT0iNTI0Ljc1IiB3aWR0aD0iNTAiIGhlaWdodD0iMjUiIHN0cm9rZT0iZ3JheSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz4KICAgICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4NC41IDUyOC4wMjYpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9ImJsYWNrIiB4PSI3LjQwOCIgeT0iMTUiPlRhZzwvdHNwYW4+CiAgICAgICAgICA8L3RleHQ+CiAgICAgICAgPC9nPgogICAgICAgIDxnIGlkPSJHcmFwaGljXzUiPgogICAgICAgICAgPHJlY3QgeD0iNTYyLjUiIHk9IjUyNCIgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNSIgZmlsbD0id2hpdGUiLz4KICAgICAgICAgIDxyZWN0IHg9IjU2Mi41IiB5PSI1MjQiIHdpZHRoPSIxMjAiIGhlaWdodD0iMjUiIHN0cm9rZT0iZ3JheSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz4KICAgICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDU2Ny41IDUyNy4yNzYpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9ImJsYWNrIiB4PSI5LjM2OCIgeT0iMTUiPkNhY2hlIEJsb2NrPC90c3Bhbj4KICAgICAgICAgIDwvdGV4dD4KICAgICAgICA8L2c+CiAgICAgICAgPGcgaWQ9IkdyYXBoaWNfOSI+CiAgICAgICAgICA8dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMjMgNTI3LjI3NikiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZmlsbD0iYmxhY2siIHg9IjYzOTQ4ODVlLTE5IiB5PSIxNSI+U2V0IDA6PC90c3Bhbj4KICAgICAgICAgIDwvdGV4dD4KICAgICAgICA8L2c+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9Ikdyb3VwXzExIj4KICAgICAgICA8ZyBpZD0iR3JhcGhpY18xNiI+CiAgICAgICAgICA8cmVjdCB4PSIzODkiIHk9IjU3Mi41IiB3aWR0aD0iMzAwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjYzBmZmZmIi8+CiAgICAgICAgICA8cmVjdCB4PSIzODkiIHk9IjU3Mi41IiB3aWR0aD0iMzAwIiBoZWlnaHQ9IjUwIiBzdHJva2U9ImdyYXkiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgICAgPC9nPgogICAgICAgIDxnIGlkPSJHcmFwaGljXzE1Ij4KICAgICAgICAgIDxyZWN0IHg9IjM5Ni41IiB5PSI1ODUiIHdpZHRoPSI1MCIgaGVpZ2h0PSIyNSIgZmlsbD0id2hpdGUiLz4KICAgICAgICAgIDxyZWN0IHg9IjM5Ni41IiB5PSI1ODUiIHdpZHRoPSI1MCIgaGVpZ2h0PSIyNSIgc3Ryb2tlPSJncmF5IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICAgICAgPHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDAxLjUgNTg4LjI3NikiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZmlsbD0iYmxhY2siIHg9IjIuOTYiIHk9IjE1Ij5WYWxpZDwvdHNwYW4+CiAgICAgICAgICA8L3RleHQ+CiAgICAgICAgPC9nPgogICAgICAgIDxnIGlkPSJHcmFwaGljXzE0Ij4KICAgICAgICAgIDxyZWN0IHg9IjQ3OS41IiB5PSI1ODUuNzUiIHdpZHRoPSI1MCIgaGVpZ2h0PSIyNSIgZmlsbD0id2hpdGUiLz4KICAgICAgICAgIDxyZWN0IHg9IjQ3OS41IiB5PSI1ODUuNzUiIHdpZHRoPSI1MCIgaGVpZ2h0PSIyNSIgc3Ryb2tlPSJncmF5IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICAgICAgPHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDg0LjUgNTg5LjAyNikiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZmlsbD0iYmxhY2siIHg9IjcuNDA4IiB5PSIxNSI+VGFnPC90c3Bhbj4KICAgICAgICAgIDwvdGV4dD4KICAgICAgICA8L2c+CiAgICAgICAgPGcgaWQ9IkdyYXBoaWNfMTMiPgogICAgICAgICAgPHJlY3QgeD0iNTYyLjUiIHk9IjU4NSIgd2lkdGg9IjEyMCIgaGVpZ2h0PSIyNSIgZmlsbD0id2hpdGUiLz4KICAgICAgICAgIDxyZWN0IHg9IjU2Mi41IiB5PSI1ODUiIHdpZHRoPSIxMjAiIGhlaWdodD0iMjUiIHN0cm9rZT0iZ3JheSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz4KICAgICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDU2Ny41IDU4OC4yNzYpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9ImJsYWNrIiB4PSI5LjM2OCIgeT0iMTUiPkNhY2hlIEJsb2NrPC90c3Bhbj4KICAgICAgICAgIDwvdGV4dD4KICAgICAgICA8L2c+CiAgICAgICAgPGcgaWQ9IkdyYXBoaWNfMTIiPgogICAgICAgICAgPHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIzIDU4OC4yNzYpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9ImJsYWNrIiB4PSI2Mzk0ODg1ZS0xOSIgeT0iMTUiPlNldCAxOjwvdHNwYW4+CiAgICAgICAgICA8L3RleHQ+CiAgICAgICAgPC9nPgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJHcm91cF8xNyI+CiAgICAgICAgPGcgaWQ9IkdyYXBoaWNfMjIiPgogICAgICAgICAgPHJlY3QgeD0iMzg5IiB5PSI2OTUuNSIgd2lkdGg9IjMwMCIgaGVpZ2h0PSI1MCIgZmlsbD0iI2MwZmZmZiIvPgogICAgICAgICAgPHJlY3QgeD0iMzg5IiB5PSI2OTUuNSIgd2lkdGg9IjMwMCIgaGVpZ2h0PSI1MCIgc3Ryb2tlPSJncmF5IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICAgIDwvZz4KICAgICAgICA8ZyBpZD0iR3JhcGhpY18yMSI+CiAgICAgICAgICA8cmVjdCB4PSIzOTYuNSIgeT0iNzA4IiB3aWR0aD0iNTAiIGhlaWdodD0iMjUiIGZpbGw9IndoaXRlIi8+CiAgICAgICAgICA8cmVjdCB4PSIzOTYuNSIgeT0iNzA4IiB3aWR0aD0iNTAiIGhlaWdodD0iMjUiIHN0cm9rZT0iZ3JheSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz4KICAgICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDQwMS41IDcxMS4yNzYpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9ImJsYWNrIiB4PSIyLjk2IiB5PSIxNSI+VmFsaWQ8L3RzcGFuPgogICAgICAgICAgPC90ZXh0PgogICAgICAgIDwvZz4KICAgICAgICA8ZyBpZD0iR3JhcGhpY18yMCI+CiAgICAgICAgICA8cmVjdCB4PSI0NzkuNSIgeT0iNzA4Ljc1IiB3aWR0aD0iNTAiIGhlaWdodD0iMjUiIGZpbGw9IndoaXRlIi8+CiAgICAgICAgICA8cmVjdCB4PSI0NzkuNSIgeT0iNzA4Ljc1IiB3aWR0aD0iNTAiIGhlaWdodD0iMjUiIHN0cm9rZT0iZ3JheSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz4KICAgICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4NC41IDcxMi4wMjYpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9ImJsYWNrIiB4PSI3LjQwOCIgeT0iMTUiPlRhZzwvdHNwYW4+CiAgICAgICAgICA8L3RleHQ+CiAgICAgICAgPC9nPgogICAgICAgIDxnIGlkPSJHcmFwaGljXzE5Ij4KICAgICAgICAgIDxyZWN0IHg9IjU2Mi41IiB5PSI3MDgiIHdpZHRoPSIxMjAiIGhlaWdodD0iMjUiIGZpbGw9IndoaXRlIi8+CiAgICAgICAgICA8cmVjdCB4PSI1NjIuNSIgeT0iNzA4IiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjI1IiBzdHJva2U9ImdyYXkiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgICAgICA8dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NjcuNSA3MTEuMjc2KSIgZmlsbD0iYmxhY2siPgogICAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmaWxsPSJibGFjayIgeD0iOS4zNjgiIHk9IjE1Ij5DYWNoZSBCbG9jazwvdHNwYW4+CiAgICAgICAgICA8L3RleHQ+CiAgICAgICAgPC9nPgogICAgICAgIDxnIGlkPSJHcmFwaGljXzE4Ij4KICAgICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDMxNC43MDQgNzExLjI3NikiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZmlsbD0iYmxhY2siIHg9IjAiIHk9IjE1Ij5TZXQgUy0xOjwvdHNwYW4+CiAgICAgICAgICA8L3RleHQ+CiAgICAgICAgPC9nPgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJHcmFwaGljXzIzIj4KICAgICAgICA8dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MzcgNjMxLjMyOCkiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9ImJsYWNrIiB4PSIxNTk4NzIxMmUtMjAiIHk9IjE1Ij4uPC90c3Bhbj4KICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9ImJsYWNrIiB4PSIxNTk4NzIxMmUtMjAiIHk9IjMzLjQ0OCI+LjwvdHNwYW4+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmaWxsPSJibGFjayIgeD0iMTU5ODcyMTJlLTIwIiB5PSI1MS44OTU5OTYiPi48L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg==" width="381" height="235" class="img_ev3q"></p><p>Figure 6.27 <strong>Direct-Mapped cache</strong> (E*= 1). There is exactly one line per set*</p></div>
<p>The process taht a cache goes through of determining whether a request is a hit or a miss and then extracting the requested word consist of three steps:</p>
<ol>
<li>set selection</li>
<li>line matching</li>
<li>word extraction</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="set-selection-in-direct-mapped-caches">Set Selection in Direct-Mapped Caches<a href="#set-selection-in-direct-mapped-caches" class="hash-link" aria-label="Direct link to Set Selection in Direct-Mapped Caches" title="Direct link to Set Selection in Direct-Mapped Caches">​</a></h4>
<div style="text-align:center"><p><img decoding="async" loading="lazy" src="/assets/images/fig6.28-dc34a4d51293656e3beb576829462631.svg" width="842" height="265" class="img_ev3q"></p><p>Figure 6.28 <strong>Set selection in a direct-mapped cache.</strong></p></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="line-matching-in-direct-mapped-caches">Line Matching in Direct-Mapped Caches<a href="#line-matching-in-direct-mapped-caches" class="hash-link" aria-label="Direct link to Line Matching in Direct-Mapped Caches" title="Direct link to Line Matching in Direct-Mapped Caches">​</a></h4>
<div style="text-align:center"><p><img decoding="async" loading="lazy" src="/assets/images/fig6.29-2954a226bb8e39dcac883c11726c1764.svg" width="753" height="331" class="img_ev3q"></p><p>Figure 6.29 <strong>Line matching and word selection in a direct-mapped cache.</strong> Within the cache block, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mn>0</mn></mrow><annotation encoding="application/x-tex">w0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mord">0</span></span></span></span> denotes the low-order byte of the word <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.02691em">w</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">w_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span> the next byte, and so on.</p></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="word-selection-in-direct-mapped-caches">Word Selection in Direct-Mapped Caches<a href="#word-selection-in-direct-mapped-caches" class="hash-link" aria-label="Direct link to Word Selection in Direct-Mapped Caches" title="Direct link to Word Selection in Direct-Mapped Caches">​</a></h4>
<p>the block offset bits provide the offset of the first byte in the desired word.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="line-replacement-on-missess-in-direct-mapped-caches">Line Replacement on Missess in Direct-Mapped Caches<a href="#line-replacement-on-missess-in-direct-mapped-caches" class="hash-link" aria-label="Direct link to Line Replacement on Missess in Direct-Mapped Caches" title="Direct link to Line Replacement on Missess in Direct-Mapped Caches">​</a></h4>
<p>if the cache misses, then it needs to retrive the requested block from the next level in the memory hierarchy and sotre the new block in one of the cache lines of the set indicated by the set index bits.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="putting-it-together-a-direct-mapped-cache-in-action">Putting It Together: A Direct-Mapped Cache in Action<a href="#putting-it-together-a-direct-mapped-cache-in-action" class="hash-link" aria-label="Direct link to Putting It Together: A Direct-Mapped Cache in Action" title="Direct link to Putting It Together: A Direct-Mapped Cache in Action">​</a></h4>
<ul>
<li>The concatenation of the tag and index bits uniquely identifies each block in memory.</li>
<li>Since there are eight memory blcoks but only four cache sets, multiple blocks map to the sam cache set (i.e., they have the sam set index).</li>
<li>Blocks that map to the same cache set are uniquely identified by the tag.</li>
</ul>
<table><thead><tr><th>Set</th><th>Valid</th><th>Tag</th><th>block[0]</th><th>block[1]</th></tr></thead><tbody><tr><td>0</td><td>0</td><td></td><td></td><td></td></tr><tr><td>1</td><td></td><td></td><td></td><td></td></tr><tr><td>2</td><td></td><td></td><td></td><td></td></tr><tr><td>3</td><td></td><td></td><td></td><td></td></tr></tbody></table>
<div style="display:flex;justify-content:center"><table align="center"><tr><th></th><th colspan="3">Address bits</th><th></th></tr><tr><th>Address<br>(decimal)</th><th>Tag bits<br>(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord mathnormal">t</span></span></span></span> = 1)</th><th>Index bits<br>(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">s</span></span></span></span> = 2)</th><th>Offset bits<br>(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">b</span></span></span></span> = 1)</th><th>Block number<br>(decimal)</th></tr><tr><td>0</td><td>0</td><td>00</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>00</td><td>1</td><td>0</td></tr><tr><td>2</td><td>0</td><td>01</td><td>0</td><td>1</td></tr><tr><td>3</td><td>0</td><td>01</td><td>1</td><td>1</td></tr><tr><td>4</td><td>0</td><td>10</td><td>0</td><td>2</td></tr><tr><td>5</td><td>0</td><td>10</td><td>1</td><td>2</td></tr><tr><td>6</td><td>0</td><td>11</td><td>0</td><td>3</td></tr><tr><td>7</td><td>0</td><td>11</td><td>1</td><td>3</td></tr><tr><td>8</td><td>1</td><td>00</td><td>0</td><td>4</td></tr><tr><td>9</td><td>1</td><td>00</td><td>1</td><td>4</td></tr><tr><td>10</td><td>1</td><td>01</td><td>0</td><td>5</td></tr><tr><td>11</td><td>1</td><td>01</td><td>1</td><td>5</td></tr><tr><td>12</td><td>1</td><td>10</td><td>0</td><td>6</td></tr><tr><td>13</td><td>1</td><td>10</td><td>1</td><td>6</td></tr><tr><td>14</td><td>1</td><td>11</td><td>0</td><td>7</td></tr><tr><td>15</td><td>1</td><td>11</td><td>1</td><td>7</td></tr></table></div>
<div style="text-align:center"><p>Figure 6.30: <strong>4-bit address space for example direct-mapped cache</strong></p></div>
<table><thead><tr><th>Set</th><th>Valid</th><th>Tag</th><th>block[0]</th><th>block[1]</th></tr></thead><tbody><tr><td>0</td><td>0</td><td></td><td></td><td></td></tr><tr><td>1</td><td>0</td><td></td><td></td><td></td></tr><tr><td>2</td><td>0</td><td></td><td></td><td></td></tr><tr><td>3</td><td>0</td><td></td><td></td><td></td></tr></tbody></table>
<ol>
<li><strong>Read word at address 0</strong>. cache miss: valid is 0, stores block in set 0. the cache return m[0] from blcok[0]</li>
</ol>
<table><thead><tr><th>Set</th><th>Valid</th><th>Tag</th><th>block[0]</th><th>block[1]</th></tr></thead><tbody><tr><td>0</td><td>1</td><td>0</td><td>m[0]</td><td>m[1]</td></tr><tr><td>1</td><td>0</td><td></td><td></td><td></td></tr><tr><td>2</td><td>0</td><td></td><td></td><td></td></tr><tr><td>3</td><td>0</td><td></td><td></td><td></td></tr></tbody></table>
<ol start="2">
<li><strong>Read word at address 1</strong>. cache hit, return m[1] from block[1]</li>
<li><strong>Read word at address 13</strong>. cache miss. valid is 0, stores block in set 2, loads block 6 into set 2 and returns m[13] from block[1]</li>
</ol>
<table><thead><tr><th>Set</th><th>Valid</th><th>Tag</th><th>block[0]</th><th>block[1]</th></tr></thead><tbody><tr><td>0</td><td>1</td><td>0</td><td>m[0]</td><td>m[1]</td></tr><tr><td>1</td><td>0</td><td></td><td></td><td></td></tr><tr><td>2</td><td>1</td><td>1</td><td>m[12]</td><td>m[13]</td></tr><tr><td>3</td><td>0</td><td></td><td></td><td></td></tr></tbody></table>
<ol start="4">
<li><strong>Read word at address 8</strong>. cache miss, valid is 1, but tag does not match, replace with new cache line</li>
</ol>
<table><thead><tr><th>Set</th><th>Valid</th><th>Tag</th><th>block[0]</th><th>block[1]</th></tr></thead><tbody><tr><td>0</td><td>1</td><td>1</td><td>m[8]</td><td>m[9]</td></tr><tr><td>1</td><td>0</td><td></td><td></td><td></td></tr><tr><td>2</td><td>1</td><td>1</td><td>m[12]</td><td>m[13]</td></tr><tr><td>3</td><td>0</td><td></td><td></td><td></td></tr></tbody></table>
<ol start="5">
<li><strong>Read word at address 0</strong>. cache miss, block just changed, replace again.</li>
</ol>
<table><thead><tr><th>Set</th><th>Valid</th><th>Tag</th><th>block[0]</th><th>block[1]</th></tr></thead><tbody><tr><td>0</td><td>1</td><td>0</td><td>m[0]</td><td>m[1]</td></tr><tr><td>1</td><td>0</td><td></td><td></td><td></td></tr><tr><td>2</td><td>1</td><td>1</td><td>m[12]</td><td>m[13]</td></tr><tr><td>3</td><td>0</td><td></td><td></td><td></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="conflict-misses-in-direct-mapped-caches">Conflict Misses in Direct-Mapped Caches<a href="#conflict-misses-in-direct-mapped-caches" class="hash-link" aria-label="Direct link to Conflict Misses in Direct-Mapped Caches" title="Direct link to Conflict Misses in Direct-Mapped Caches">​</a></h4>
<ul>
<li>Why index with the middle bits?</li>
</ul>
<p><strong>pay attention on the colour of block and bolded numebr</strong>, with the middle-order bit indexing, the cache can hold an enter <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07153em">C</span></span></span></span>-size chunk of the array</p>
<div style="text-align:center"><p><img decoding="async" loading="lazy" src="/assets/images/fig6.31-57f173fbf300b37f2092050417b5d560.svg" width="706" height="536" class="img_ev3q"></p><p><em>Figure 6.31 Why cache index with the middle bits</em></p></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="643-set-associative-caches">6.4.3 Set Associative Caches<a href="#643-set-associative-caches" class="hash-link" aria-label="Direct link to 6.4.3 Set Associative Caches" title="Direct link to 6.4.3 Set Associative Caches">​</a></h3>
<p>A <em>set associative cache</em> let each set holds more than one cache line.</p>
<div style="text-align:center"><p><img decoding="async" loading="lazy" src="/assets/images/fig6.32-1f4747f1365491772d66a117cee58e1b.svg" width="381" height="496" class="img_ev3q"></p><p><em>Figure 6.32 <strong>Set associative cache</strong> (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>&lt;</mo><mi>E</mi><mo>&lt;</mo><mi>C</mi><mi mathvariant="normal">/</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">1&lt;E&lt;C/B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em"></span><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.07153em">C</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.05017em">B</span></span></span></span>). In a sete associative cache, each set contains more than one line. This particular eexample shows a two-way set associative cache.</em></p></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="set-selection-in-set-associative-caches">Set Selection in Set Associative Caches<a href="#set-selection-in-set-associative-caches" class="hash-link" aria-label="Direct link to Set Selection in Set Associative Caches" title="Direct link to Set Selection in Set Associative Caches">​</a></h4>
<div style="text-align:center"><p><img decoding="async" loading="lazy" src="/assets/images/fig6.33-565a6a7c1381b2446bbdecfab42fe957.svg" width="858" height="496" class="img_ev3q"></p><p><em>Figure <strong>Set selection in a set associative cache</strong></em></p></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="line-matching-and-word-selection-in-set-associative-caches">Line Matching and Word Selection in Set Associative Caches<a href="#line-matching-and-word-selection-in-set-associative-caches" class="hash-link" aria-label="Direct link to Line Matching and Word Selection in Set Associative Caches" title="Direct link to Line Matching and Word Selection in Set Associative Caches">​</a></h4>
<p>the cache must search each line in the set for a valid line whose tag matches the tag in the address.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="line-replacement-on-misses-in-set-associative-caches">Line Replacement on Misses in Set Associative Caches<a href="#line-replacement-on-misses-in-set-associative-caches" class="hash-link" aria-label="Direct link to Line Replacement on Misses in Set Associative Caches" title="Direct link to Line Replacement on Misses in Set Associative Caches">​</a></h4>
<p><em>least frequently used (LFU)</em> policy will replace the line that has been referenced the fewest times over some past time window.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="644-fully-associative-caches">6.4.4 Fully Associative Caches<a href="#644-fully-associative-caches" class="hash-link" aria-label="Direct link to 6.4.4 Fully Associative Caches" title="Direct link to 6.4.4 Fully Associative Caches">​</a></h3>
<p>A <em>fully associative cache</em> consists of a single set that contains all of the cache lines.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="set-selection-in-fully-associative-caches">Set Selection in Fully Associative Caches<a href="#set-selection-in-fully-associative-caches" class="hash-link" aria-label="Direct link to Set Selection in Fully Associative Caches" title="Direct link to Set Selection in Fully Associative Caches">​</a></h4>
<p>there are no set index bits in the address which is partitioned into only a tag and a block offset.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="line-matching-and-word-selection-in-fully-associative-caches">Line Matching and Word Selection in Fully Associative Caches<a href="#line-matching-and-word-selection-in-fully-associative-caches" class="hash-link" aria-label="Direct link to Line Matching and Word Selection in Fully Associative Caches" title="Direct link to Line Matching and Word Selection in Fully Associative Caches">​</a></h4>
<p>fully associative caches are only appropriate for small caches, because the cache circuitry must search for many matching tags in parallel.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="645-issues-with-writes">6.4.5 Issues with Writes<a href="#645-issues-with-writes" class="hash-link" aria-label="Direct link to 6.4.5 Issues with Writes" title="Direct link to 6.4.5 Issues with Writes">​</a></h3>
<p>The cache must maintain an additional dirty bit for each cache line that indicates whether or not the cache block has been modified.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="646-anatomy-of-a-real-cache-hierarchy">6.4.6 Anatomy of a Real Cache Hierarchy<a href="#646-anatomy-of-a-real-cache-hierarchy" class="hash-link" aria-label="Direct link to 6.4.6 Anatomy of a Real Cache Hierarchy" title="Direct link to 6.4.6 Anatomy of a Real Cache Hierarchy">​</a></h3>
<ul>
<li><em>i-cache</em> : A cache that holds instructions only, typically read-only.</li>
<li><em>d-cache</em> : A cache that holds program data only.</li>
<li><em>unified cache</em> : cache that holds both instructions and data.</li>
</ul>
<p>having separate caches ensures that data accesses do not create conflict misses with instruction accesses.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="647-performance-impact-of-cache-parameters">6.4.7 Performance Impact of Cache Parameters<a href="#647-performance-impact-of-cache-parameters" class="hash-link" aria-label="Direct link to 6.4.7 Performance Impact of Cache Parameters" title="Direct link to 6.4.7 Performance Impact of Cache Parameters">​</a></h3>
<ul>
<li>
<p><em>Miss rate</em> . The fraction of memory references during the execution of a program, or a part of a program</p>
<h1>misses / # references</h1>
</li>
<li>
<p><em>Hit rate</em> . the fraction of memory references that hit. <span class="katex-error" title="ParseError: KaTeX parse error: Expected &#x27;EOF&#x27;, got &#x27;#&#x27; at position 5: 1 - #̲ miss rate" style="color:#cc0000">1 - # miss rate</span>.</p>
</li>
<li>
<p><em>Hit time</em> . the time to deliver a word in the cache to the CPU, including the time for set selection, line identification, and word selection.</p>
</li>
<li>
<p><em>Miss penalty</em> . Any additional time required because of a miss.</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20230402142751114" src="/assets/images/image-20230402142751114-ce5c65f9903151a3bde5b929322baa03.png" width="739" height="765" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="impact-of-cache-size">Impact of Cache Size<a href="#impact-of-cache-size" class="hash-link" aria-label="Direct link to Impact of Cache Size" title="Direct link to Impact of Cache Size">​</a></h4>
<p>larger cache will tend to increase the hit rate, but it is always harder to make large memories run faster.
larger caches tend to increase the hit time.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="impact-of-block-size">Impact of Block Size<a href="#impact-of-block-size" class="hash-link" aria-label="Direct link to Impact of Block Size" title="Direct link to Impact of Block Size">​</a></h4>
<p>larger blocks can help increase the hit rate by exploiting any spatial locality that might exist in a program. However, larger blocks imply a smaller number of cache lines, which can hurt the hit rate in programs with more temporal locality than spatial locality. Larger blocks also cause larger miss penalty, smaller blocks cause larger transfer time.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="impact-of-associativity">Impact of Associativity<a href="#impact-of-associativity" class="hash-link" aria-label="Direct link to Impact of Associativity" title="Direct link to Impact of Associativity">​</a></h4>
<p>higher associativity decreases the vulnerability of the cache to thrashing due to conflict misses. However, higher associativity is expensive to implement and hard to make fast.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="impact-of-write-strategy">Impact of Write Strategy<a href="#impact-of-write-strategy" class="hash-link" aria-label="Direct link to Impact of Write Strategy" title="Direct link to Impact of Write Strategy">​</a></h4>
<p>read misses are less expensive because they do not triger a memory write.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="65-writing-cache-friendly-code">6.5 Writing Cache-Friendly Code<a href="#65-writing-cache-friendly-code" class="hash-link" aria-label="Direct link to 6.5 Writing Cache-Friendly Code" title="Direct link to 6.5 Writing Cache-Friendly Code">​</a></h2>
<blockquote>
<ul>
<li>A <em>block</em> is a fixed-size packet of information that moves back and forth between a cache and main memory ( or a lower-level cache)</li>
<li>A <em>line</em> is a container in a cache that stores a block, as well as other information such as the valid bit and the tag bits.</li>
<li>A <em>set</em> is a collection of one or more lines. Sets in direct-mapped caches consist of a single line.</li>
</ul>
</blockquote>
<ol>
<li><em>Make the common case go fast</em>.</li>
<li><em>Minimize the number of cache misses in each inner loop</em>.</li>
</ol>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sumvec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">N</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sum </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* compiler can cache them in the register file */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> N</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                sum </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* caches at all levels of the</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">                                 * memory hierarchy store data as continguous blocks</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">                                 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="66-putting-it-together-the-impact-of-caches-on-program-performance">6.6 Putting It Together: The Impact of Caches on Program Performance<a href="#66-putting-it-together-the-impact-of-caches-on-program-performance" class="hash-link" aria-label="Direct link to 6.6 Putting It Together: The Impact of Caches on Program Performance" title="Direct link to 6.6 Putting It Together: The Impact of Caches on Program Performance">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="67-summary">6.7 Summary<a href="#67-summary" class="hash-link" aria-label="Direct link to 6.7 Summary" title="Direct link to 6.7 Summary">​</a></h2></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/TOC/computer/system/csapp/ch03"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Chapter 3 Machine-Level Representation of Programs</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/TOC/computer/system/csapp/ch07"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Chapter 7 Linking</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#61-storage-technologies" class="table-of-contents__link toc-highlight">6.1 Storage Technologies</a><ul><li><a href="#611-random-access-memory" class="table-of-contents__link toc-highlight">6.1.1 Random Access Memory</a></li><li><a href="#612-disk-storage" class="table-of-contents__link toc-highlight">6.1.2 Disk Storage</a></li></ul></li><li><a href="#62-locality" class="table-of-contents__link toc-highlight">6.2 Locality</a></li><li><a href="#63-the-memory-hierarchy" class="table-of-contents__link toc-highlight">6.3 The Memory Hierarchy</a><ul><li><a href="#cache-hits" class="table-of-contents__link toc-highlight">Cache Hits</a></li><li><a href="#cache-misses" class="table-of-contents__link toc-highlight">Cache Misses</a></li><li><a href="#kinds-of-cache-misses" class="table-of-contents__link toc-highlight">Kinds of Cache Misses</a></li><li><a href="#cache-management" class="table-of-contents__link toc-highlight">Cache Management</a></li></ul></li><li><a href="#64-cache-memories" class="table-of-contents__link toc-highlight">6.4 Cache Memories</a><ul><li><a href="#641-generic-cache-memory-organization" class="table-of-contents__link toc-highlight">6.4.1 Generic Cache Memory Organization</a></li><li><a href="#642-direct-mapped-caches" class="table-of-contents__link toc-highlight">6.4.2 Direct-Mapped Caches</a></li><li><a href="#643-set-associative-caches" class="table-of-contents__link toc-highlight">6.4.3 Set Associative Caches</a></li><li><a href="#644-fully-associative-caches" class="table-of-contents__link toc-highlight">6.4.4 Fully Associative Caches</a></li><li><a href="#645-issues-with-writes" class="table-of-contents__link toc-highlight">6.4.5 Issues with Writes</a></li><li><a href="#646-anatomy-of-a-real-cache-hierarchy" class="table-of-contents__link toc-highlight">6.4.6 Anatomy of a Real Cache Hierarchy</a></li><li><a href="#647-performance-impact-of-cache-parameters" class="table-of-contents__link toc-highlight">6.4.7 Performance Impact of Cache Parameters</a></li></ul></li><li><a href="#65-writing-cache-friendly-code" class="table-of-contents__link toc-highlight">6.5 Writing Cache-Friendly Code</a></li><li><a href="#66-putting-it-together-the-impact-of-caches-on-program-performance" class="table-of-contents__link toc-highlight">6.6 Putting It Together: The Impact of Caches on Program Performance</a></li><li><a href="#67-summary" class="table-of-contents__link toc-highlight">6.7 Summary</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/TOC">NOTEs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/Zefrain/notes" target="_blank" rel="noopener noreferrer" class="footer__link-item">More<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Zefrain's Blog. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>