<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Blog | Zefrain&#x27;s Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/blog"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Blog | Zefrain&#x27;s Blog"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://github.com/blog"><link data-rh="true" rel="alternate" href="https://github.com/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/blog" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"Blog","@id":"https://github.com/blog","mainEntityOfPage":"https://github.com/blog","headline":"Blog","description":"Blog","blogPost":[{"@type":"BlogPosting","@id":"https://github.com/blog/2024/12/10/vim-multi-replace","mainEntityOfPage":"https://github.com/blog/2024/12/10/vim-multi-replace","url":"https://github.com/blog/2024/12/10/vim-multi-replace","headline":"How to Find and Replace Project-wide in Vim","name":"How to Find and Replace Project-wide in Vim","description":"0. Requirements","datePublished":"2024-12-10T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://github.com/blog/2024/11/29/openwrt-firewall","mainEntityOfPage":"https://github.com/blog/2024/11/29/openwrt-firewall","url":"https://github.com/blog/2024/11/29/openwrt-firewall","headline":"Set Firewall for ZeroTier Interface","name":"Set Firewall for ZeroTier Interface","description":"0. Check interface name of zerotier","datePublished":"2024-11-29T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://github.com/blog/2024/11/24/aria2-legacy","mainEntityOfPage":"https://github.com/blog/2024/11/24/aria2-legacy","url":"https://github.com/blog/2024/11/24/aria2-legacy","headline":"Aria2 OSSL_PROVIDER_load 'legacy' failed","name":"Aria2 OSSL_PROVIDER_load 'legacy' failed","description":"/etc/init.d/aria2 add BOLD line.","datePublished":"2024-11-24T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://github.com/blog/2024/10/15/aria2-ssl","mainEntityOfPage":"https://github.com/blog/2024/10/15/aria2-ssl","url":"https://github.com/blog/2024/10/15/aria2-ssl","headline":"aria2 SSL/TLS error on openwrt","name":"aria2 SSL/TLS error on openwrt","description":"下载https 链接报错","datePublished":"2024-10-15T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://github.com/blog/2024/09/20/strlen","mainEntityOfPage":"https://github.com/blog/2024/09/20/strlen","url":"https://github.com/blog/2024/09/20/strlen","headline":"Disadvantages of strlen() in Embedded Domain","name":"Disadvantages of strlen() in Embedded Domain","description":"To read from a \"TCP Communication\" you are probably using read. The prototype for read is","datePublished":"2024-09-20T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://github.com/blog/2024/07/25/kvm","mainEntityOfPage":"https://github.com/blog/2024/07/25/kvm","url":"https://github.com/blog/2024/07/25/kvm","headline":"KVM 运行并编辑iso镜像文件","name":"KVM 运行并编辑iso镜像文件","description":"安装 KVM 依赖包","datePublished":"2024-07-25T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://github.com/blog/2024/06/25/reduce-ubuntu-server","mainEntityOfPage":"https://github.com/blog/2024/06/25/reduce-ubuntu-server","url":"https://github.com/blog/2024/06/25/reduce-ubuntu-server","headline":"Reduce Ubuntu Server","name":"Reduce Ubuntu Server","description":"0. Sizes for /boot and /boot/efi","datePublished":"2024-06-25T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://github.com/blog/2024/06/19/win-skip-netlogin","mainEntityOfPage":"https://github.com/blog/2024/06/19/win-skip-netlogin","url":"https://github.com/blog/2024/06/19/win-skip-netlogin","headline":"安装 Windows 如何跳过账号登录","name":"安装 Windows 如何跳过账号登录","description":"方法四","datePublished":"2024-06-19T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://github.com/blog/2024/06/07/vmdk2img","mainEntityOfPage":"https://github.com/blog/2024/06/07/vmdk2img","url":"https://github.com/blog/2024/06/07/vmdk2img","headline":"在硬盘上运行虚拟机系统","name":"在硬盘上运行虚拟机系统","description":"将虚拟机安装的系统完整拷贝为img文件，并做成U盘系统的方案","datePublished":"2024-06-07T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://github.com/blog/2024/05/21/auto-expand-partition","mainEntityOfPage":"https://github.com/blog/2024/05/21/auto-expand-partition","url":"https://github.com/blog/2024/05/21/auto-expand-partition","headline":"Manually expand partition scripts","name":"Manually expand partition scripts","description":"find partition for /","datePublished":"2024-05-21T00:00:00.000Z","author":[],"keywords":[]}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Zefrain&#39;s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Zefrain&#39;s Blog Atom Feed">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.be07ce7e.css">
<script src="/assets/js/runtime~main.b02c6dec.js" defer="defer"></script>
<script src="/assets/js/main.be9cb12d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Homepage</b></a><a class="navbar__item navbar__link" href="/docs/category/TOC">NOTEs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Zefrain" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/12/10/vim-multi-replace">How to Find and Replace Project-wide in Vim</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/11/29/openwrt-firewall">Set Firewall for ZeroTier Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/11/24/aria2-legacy">Aria2 OSSL_PROVIDER_load &#x27;legacy&#x27; failed</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/10/15/aria2-ssl">aria2 SSL/TLS error on openwrt</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/09/20/strlen">Disadvantages of strlen() in Embedded Domain</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/07/25/kvm">KVM 运行并编辑iso镜像文件</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/06/25/reduce-ubuntu-server">Reduce Ubuntu Server</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/06/19/win-skip-netlogin">安装 Windows 如何跳过账号登录</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/06/07/vmdk2img">在硬盘上运行虚拟机系统</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/05/21/auto-expand-partition">Manually expand partition scripts</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/05/20/HOWTO-configure-network-on-ubuntu">Set netplan configuration</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/05/20/auto-login">Auth Login at Startup</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/05/20/remove-snapd">Remove snapd on ubuntu</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/12/26/docker-proxy">Set docker proxy</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/08/09/gdb-break-if">gdb continue until if condition hit</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/07/30/win-timsync">Windows set time server use w32tm</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/07/03/pyinstaller-requests">No module named &#x27;charset_normalizer.md__mypyc&#x27;</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/06/15/coredump-settings">coredump related settings</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/06/15/docker-coredump">generate coredump for docker container</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/03/21/yum-syntax-error">yum error with SyntaxError: invalid syntax</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/03/16/docker-copy-from-image">Docker: Copy From Image</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/03/16/docker-nonroot-user-access">Docker: Enable Non-Root User Access</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/02/17/openldap-sync">Why openldap doesn&#x27;t sync from master</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/01/21/coredump-file-set">How to set coredump file path</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/01/15/objdump-C-line">How to associate assembly code to exact line in C program?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/01/14/useful-macro">Useful Macro that can be a template</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/01/11/vim-copy-to-clipboard">How to copy to clipboard in Vim?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/01/09/setup-local-ntp-server">Configure Local NTP Server</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2022</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/12/20/2022/interface-manage">Connection ‘ens33‘ is not available on device ens33 because device is strictly unmanaged</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/12/16/2022/docker-container-config">docker  modify config for running container</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/22/2022/git-diff-meld-tool">Set up Meld as Difftool and Mergetool for Git</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/08/2022/gdb-showlist">gdb show list</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/28/2022/dnssec-forward">insecurity proof failed resolving &#x27;$DOMAIN/A/IN&#x27;</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/27/2022/download-with-deps">How To Download Packages With Dependencies Locally In Ubuntu, Debian, Linux Mint, Pop OS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/25/2022/ms_ad_key_concepts_schema">ms_ad_key_concepts_schema</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/20/2022/lockdown-module">Lockdown: unsigned module loading is restricted</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/19/2022/no-response">debug busy process</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/13/2022/elisp-if">execute multiple statements in an &quot;if&quot; statement</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/11/2022/port-forward">iptables port map</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/20/2022/ubuntu-AD-sssd">SSSD and Active Directory</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/20/2022/ubuntu-AD-winbind">Member Server in an Active Directory Domain</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/20/2022/yum-block-obsolete">How to block yum from upgrading obsoleted package?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/18/2022/clean-buff-cache">How to Clear Cache in Linux?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/03/2022/mem-pool">ideas of memory pool</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/30/2022/memory-leak">memory leak</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/28/2022/curl-exec">execute bash script remotely via curl</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/28/2022/gcc">gcc error when inline without static</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/28/2022/markdown-center">center tables in a markdown file</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/28/2022/rpm-install">rpm install rpm package with dependencies</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/27/2022/markdown-math">latex (math) support for markdown</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/25/2022/backtrace">backtrace symbols</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/gdb print full value">gdb print full value</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/25/2022/markdown">space in markdown link</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/25/2022/vim">vim negative look ahead</a></li></ul></div></nav></aside><main class="col col--7"><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/12/10/vim-multi-replace">How to Find and Replace Project-wide in Vim</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-12-10T00:00:00.000Z">December 10, 2024</time> · <!-- -->One min read</div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="0-requirements">0. Requirements<a href="#0-requirements" class="hash-link" aria-label="Direct link to 0. Requirements" title="Direct link to 0. Requirements">​</a></h2>
<ul>
<li><a href="https://github.com/junegunn/fzf" target="_blank" rel="noopener noreferrer">fzf</a> and <a href="https://github.com/junegunn/fzf.vim" target="_blank" rel="noopener noreferrer">fzf.vim</a> are installed</li>
<li><a href="/[https://github.com/BurntSushi/ripgrep">Rg</a> or <a href="https://github.com/ggreer/the_silver_searcher" target="_blank" rel="noopener noreferrer">ag</a> is installed</li>
<li>set alt/option to ESC+</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-usage">1. Usage<a href="#1-usage" class="hash-link" aria-label="Direct link to 1. Usage" title="Direct link to 1. Usage">​</a></h2>
<ol>
<li><code>:Rg pattern</code> : search pattern in project</li>
<li><code>&lt;tab&gt;</code> to select, <code>&lt;shift&gt;-&lt;tab&gt;</code> to deselect to <em>quickfix list</em></li>
<li><code>&lt;enter&gt;</code> to pop quickfix list</li>
<li><code>:cfdo %s/pattern/string/g</code> to replace all instances in <em>quickfix list</em></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-reference">2. Reference<a href="#2-reference" class="hash-link" aria-label="Direct link to 2. Reference" title="Direct link to 2. Reference">​</a></h2>
<ul>
<li><a href="https://elliotec.com/how-to-find-and-replace-in-project-with-vim/" target="_blank" rel="noopener noreferrer">elliotec | How to Find and Replace Project-wide in Vim</a></li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/vim">vim</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/11/29/openwrt-firewall">Set Firewall for ZeroTier Interface</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-11-29T00:00:00.000Z">November 29, 2024</time> · <!-- -->2 min read</div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="0-check-interface-name-of-zerotier">0. Check interface name of zerotier<a href="#0-check-interface-name-of-zerotier" class="hash-link" aria-label="Direct link to 0. Check interface name of zerotier" title="Direct link to 0. Check interface name of zerotier">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">root@ImmortalWrt:~# zerotier-cli listnetworks</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">200 listnetworks &lt;nwid&gt; &lt;name&gt; &lt;mac&gt; &lt;status&gt; &lt;type&gt; &lt;dev&gt; &lt;ZT assigned ips&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">200 listnetworks 565799d8f6d8da8f furious_draper 8e:da:a0:99:f2:2c OK PUBLIC ztr2qucatz 192.168.168.168/24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ztr2qucatz</strong> is the interface name that we need to use later</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-add-zone">1. Add zone<a href="#1-add-zone" class="hash-link" aria-label="Direct link to 1. Add zone" title="Direct link to 1. Add zone">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Add a new zone for ZeroTier</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci add firewall zone</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci set firewall.@zone[-1].name=&#x27;zerotier&#x27;          # Set the zone name to &#x27;zerotier&#x27; (can be any name you choose)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci set firewall.@zone[-1].network=&#x27;ztr2qucatz&#x27;     # Set the network to the ZeroTier interface (ztr2qucatz)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci set firewall.@zone[-1].input=&#x27;ACCEPT&#x27;           # Allow incoming traffic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci set firewall.@zone[-1].output=&#x27;ACCEPT&#x27;          # Allow outgoing traffic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci set firewall.@zone[-1].forward=&#x27;ACCEPT&#x27;         # Allow forwarding traffic (if needed)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci commit firewall</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/etc/init.d/firewall restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-add-rule">2. Add rule<a href="#2-add-rule" class="hash-link" aria-label="Direct link to 2. Add rule" title="Direct link to 2. Add rule">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Allow all traffic from the zerotier zone to the lan zone</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci add firewall rule</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci set firewall.@rule[-1].name=&#x27;Allow-Zerotier&#x27;               # Name for this rule</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci set firewall.@rule[-1].src=&#x27;zerotier&#x27;                      # Source is the zerotier zone (the name of zone just created)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci set firewall.@rule[-1].dest=&#x27;lan&#x27;                          # Destination is the LAN zone (adjust if necessary)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci set firewall.@rule[-1].target=&#x27;ACCEPT&#x27;                     # Allow the traffic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci set firewall.@rule[-1].family=&#x27;ipv4&#x27;                       # Use IPv4 (you can set &#x27;ipv6&#x27; or &#x27;both&#x27; if needed)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci set firewall.@rule[-1].dest_port=&#x27;80 22 445 139 8083 4000&#x27; # Specify service port need to be allowed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uci commit firewall</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/etc/init.d/firewall restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/openwrt">openwrt</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/uci">uci</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/firewall">firewall</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/11/24/aria2-legacy">Aria2 OSSL_PROVIDER_load &#x27;legacy&#x27; failed</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-11-24T00:00:00.000Z">November 24, 2024</time> · <!-- -->One min read</div></header><div class="markdown"><blockquote>
<p>/etc/init.d/aria2 add BOLD line.
procd_add_jail &quot;$NAME.$section&quot; log
<strong>procd_add_jail_mount &quot;/usr/lib&quot; #fix &quot;errorCode=1 OSSL_PROVIDER_load &#x27;legacy&#x27; failed&quot;</strong>
procd_add_jail_mount &quot;$ca_certificate&quot; &quot;$certificate&quot; &quot;$rpc_certificate&quot; &quot;$rpc_private_key&quot;
procd_add_jail_mount_rw &quot;$dir&quot; &quot;$config_dir&quot; &quot;$log&quot;
procd_close_instance</p>
</blockquote>
<ul>
<li>Solution:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">opkg update &amp;&amp; opkg install openssl-legacy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>Reference:</h1>
<ul>
<li><a href="https://github.com/aria2/aria2/issues/2152" target="_blank" rel="noopener noreferrer">Openwrt Legacy OpenSsl error · Issue #2152 · aria2/aria2</a></li>
</ul></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/10/15/aria2-ssl">aria2 SSL/TLS error on openwrt</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-10-15T00:00:00.000Z">October 15, 2024</time> · <!-- -->One min read</div></header><div class="markdown"><p>下载https 链接报错</p>
<blockquote>
<p>aria2 -&gt; [SocketCore.cc:1019] errorCode=1 SSL/TLS handshake failure: protocol error</p>
</blockquote></div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="Read more about aria2 SSL/TLS error on openwrt" href="/blog/2024/10/15/aria2-ssl"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/09/20/strlen">Disadvantages of strlen() in Embedded Domain</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-09-20T00:00:00.000Z">September 20, 2024</time> · <!-- -->One min read</div></header><div class="markdown"><p>To read from a &quot;TCP Communication&quot; you are probably using <code>read</code>. The prototype for <code>read</code> is</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token class-name" style="color:rgb(255, 203, 107)">ssize_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> fildes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">buf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">size_t</span><span class="token plain"> nbyte</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and the return value is the number of bytes read (even if they are <code>0</code>).
So, let&#x27;s say you&#x27;re about to read 10 bytes, all of which are 0. You have an array with more than enough to hold all the data</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> fildes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// fildes = TCPConnection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nbytes </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fildes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, by inspecting <code>nbytes</code> you know you have read 10 bytes. If you check <code>data[0]</code> through <code>data[9]</code> you will find they have <code>0</code>;</p>
<h1>Reference:</h1>
<ul>
<li><a href="https://stackoverflow.com/questions/9173017/disadvantages-of-strlen-in-embedded-domain" target="_blank" rel="noopener noreferrer">Disadvantages of strlen() in Embedded Domain</a></li>
</ul></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/07/25/kvm">KVM 运行并编辑iso镜像文件</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-07-25T00:00:00.000Z">July 25, 2024</time> · <!-- -->2 min read</div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-kvm-依赖包">安装 KVM 依赖包<a href="#安装-kvm-依赖包" class="hash-link" aria-label="Direct link to 安装 KVM 依赖包" title="Direct link to 安装 KVM 依赖包">​</a></h2>
<div class="language-ssh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ssh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt -y install bridge-utils cpu-checker libvirt-clients libvirt-daemon qemu qemu-kvm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="检查-kvm-可用性">检查 KVM 可用性<a href="#检查-kvm-可用性" class="hash-link" aria-label="Direct link to 检查 KVM 可用性" title="Direct link to 检查 KVM 可用性">​</a></h2>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kvm-ok</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="Read more about KVM 运行并编辑iso镜像文件" href="/blog/2024/07/25/kvm"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/06/25/reduce-ubuntu-server">Reduce Ubuntu Server</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-06-25T00:00:00.000Z">June 25, 2024</time> · <!-- -->3 min read</div></header><div class="markdown"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="0-sizes-for-boot-and-bootefi">0. Sizes for <code>/boot</code> and <code>/boot/efi</code><a href="#0-sizes-for-boot-and-bootefi" class="hash-link" aria-label="Direct link to 0-sizes-for-boot-and-bootefi" title="Direct link to 0-sizes-for-boot-and-bootefi">​</a></h3>
<ul>
<li><strong>/boot Partition</strong>: You could reduce the <code>/boot</code> partition size to around <strong>200 MB</strong>. This should still be sufficient to hold the kernel and initramfs image. Be cautious, as going too small could lead to issues during unexpected updates or changes that might require space, such as security patches for the kernel.</li>
<li><strong>/boot/efi Partition</strong>: The EFI System Partition (<code>/boot/efi</code>) typically doesn&#x27;t require much space if you&#x27;re only using a few boot loaders. A size of <strong>100 MB</strong> is often recommended as a minimum by many Linux distributions and should be more than adequate for most single-boot configurations.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-install-pre-installed-ubuntu-server">1. Install pre-installed ubuntu server<a href="#1-install-pre-installed-ubuntu-server" class="hash-link" aria-label="Direct link to 1. Install pre-installed ubuntu server" title="Direct link to 1. Install pre-installed ubuntu server">​</a></h3>
<ul>
<li>Download pre-installed ubuntu server: <a href="https://cdimage.ubuntu.com/ubuntu-server/noble/daily-preinstalled/current/" target="_blank" rel="noopener noreferrer">Ubuntu Server 24.04 (Noble Numbat) Daily Build</a></li>
<li>use <a href="https://help.ubuntu.com/community/mkusb" target="_blank" rel="noopener noreferrer">mkusb - Community Help Wiki</a> to flash: <code>dus xxx.tar.xz</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-remove-unnecessary-packages-compile-envionrment">2. <strong>Remove Unnecessary Packages</strong> (compile envionrment)<a href="#2-remove-unnecessary-packages-compile-envionrment" class="hash-link" aria-label="Direct link to 2-remove-unnecessary-packages-compile-envionrment" title="Direct link to 2-remove-unnecessary-packages-compile-envionrment">​</a></h3>
<p>After installation, you can remove packages that are not necessary for your server&#x27;s purpose:</p>
<ul>
<li>List installed packages:</li>
</ul>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">dpkg-query -W --showformat=&#x27;${Installed-Size}\t${Package}\n&#x27; | awk &#x27;{print $1/1024 &quot; MB\t&quot; $2}&#x27; | sort -n -r</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/ubuntu">ubuntu</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Reduce Ubuntu Server" href="/blog/2024/06/25/reduce-ubuntu-server"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/06/19/win-skip-netlogin">安装 Windows 如何跳过账号登录</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-06-19T00:00:00.000Z">June 19, 2024</time> · <!-- -->One min read</div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="方法四">方法四<a href="#方法四" class="hash-link" aria-label="Direct link to 方法四" title="Direct link to 方法四">​</a></h2>
<ol>
<li>保持未连接网络</li>
<li>在连接网络界面按 <code>&lt;Shift&gt; + &lt;F10&gt;</code></li>
<li>命令行输入 <code>oobe\bypassnro.cmd</code></li>
<li>选择 <strong>我没有Internet连接</strong></li>
<li>选择<strong>继续执行受限设置</strong></li>
</ol>
<h1>Reference</h1>
<ul>
<li><a href="https://www.aqwu.net/wp/?p=1523" target="_blank" rel="noopener noreferrer">安装win11系统如何跳过微软账号登录的四种方法 – 杰力皓博</a></li>
</ul></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/06/07/vmdk2img">在硬盘上运行虚拟机系统</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-06-07T00:00:00.000Z">June 7, 2024</time> · <!-- -->One min read</div></header><div class="markdown"><p>将虚拟机安装的系统完整拷贝为img文件，并做成U盘系统的方案</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-安装-qemu-img">1. 安装 qemu-img<a href="#1-安装-qemu-img" class="hash-link" aria-label="Direct link to 1. 安装 qemu-img" title="Direct link to 1. 安装 qemu-img">​</a></h2>
<ul>
<li>Qemu for windows: <a href="https://cloudbase.it/qemu-img-windows/" target="_blank" rel="noopener noreferrer">https://cloudbase.it/qemu-img-windows/</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-虚拟机安装操作系统">2. 虚拟机安装操作系统<a href="#2-虚拟机安装操作系统" class="hash-link" aria-label="Direct link to 2. 虚拟机安装操作系统" title="Direct link to 2. 虚拟机安装操作系统">​</a></h2>
<ul>
<li>NOTE: 安装时选择单个文件</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-将vmdk文件转换为img">3. 将vmdk文件转换为img<a href="#3-将vmdk文件转换为img" class="hash-link" aria-label="Direct link to 3. 将vmdk文件转换为img" title="Direct link to 3. 将vmdk文件转换为img">​</a></h2>
<div class="language-cmd codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmd codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">qemu-img convert -f vmdk -O raw image.vmdk image.img</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-使用-windowsdiskimager-烧写u盘">4. 使用 WindowsDiskImager 烧写U盘<a href="#4-使用-windowsdiskimager-烧写u盘" class="hash-link" aria-label="Direct link to 4. 使用 WindowsDiskImager 烧写U盘" title="Direct link to 4. 使用 WindowsDiskImager 烧写U盘">​</a></h2></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/05/21/auto-expand-partition">Manually expand partition scripts</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-05-21T00:00:00.000Z">May 21, 2024</time> · <!-- -->2 min read</div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="find-partition-for-">find partition for /<a href="#find-partition-for-" class="hash-link" aria-label="Direct link to find partition for /" title="Direct link to find partition for /">​</a></h2>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">findmnt -nosource /</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/dev/sda3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="split-disk-and-partition-number">split disk and partition number<a href="#split-disk-and-partition-number" class="hash-link" aria-label="Direct link to split disk and partition number" title="Direct link to split disk and partition number">​</a></h2>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">growpart /dev/sda 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resize2fs">resize2fs<a href="#resize2fs" class="hash-link" aria-label="Direct link to resize2fs" title="Direct link to resize2fs">​</a></h2>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">resize2fs /dev/sda3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="Read more about Manually expand partition scripts" href="/blog/2024/05/21/auto-expand-partition"><b>Read more</b></a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/page/2"><div class="pagination-nav__label">Older entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/TOC">NOTEs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/Zefrain/notes" target="_blank" rel="noopener noreferrer" class="footer__link-item">More<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Zefrain's Blog. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>